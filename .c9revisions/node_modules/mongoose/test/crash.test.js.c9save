{"ts":1352708363871,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n// GH-407\n\nvar start = require('./common')\n  , assert = require('assert')\n  , mongoose = start.mongoose\n\ndescribe('crash: (gh-407)', function(){\n  it('test mongodb crash with invalid objectid string', function(done){\n    var db = mongoose.createConnection(\"mongodb://localhost/test-crash\");\n\n    var IndexedGuy = new mongoose.Schema({\n        name: { type: String }\n    });\n\n    var Guy = db.model('Guy', IndexedGuy);\n    Guy.find({\n        _id: {\n                   $in: [\n            '4e0de2a6ee47bff98000e145',\n            '4e137bd81a6a8e00000007ac',\n            '',\n            '4e0e2ca0795666368603d974']\n        }\n    }, function (err) {\n      db.close();\n\n      // should is acting strange\n      try {\n        assert.equal('Invalid ObjectId', err.message);\n      } catch (er) {\n        console.error(err);\n        throw er;\n      }\n      done();\n    });\n\n  })\n})\n\n"]],"start1":0,"start2":0,"length1":0,"length2":872}]],"length":872}
